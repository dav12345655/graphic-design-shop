<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Products - Online Graphic Shop</title>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<style>
  * { box-sizing: border-box; font-family: "Poppins", sans-serif; }
  body { margin:0; display:flex; background:linear-gradient(135deg,#e3f2fd,#f9f9fb); min-height:100vh; overflow-x:hidden; }

  /* Sidebar */
  .sidebar {
    width:250px; height:100vh;
    background:rgba(255,255,255,0.25); backdrop-filter:blur(20px);
    box-shadow:2px 0 15px rgba(0,0,0,0.1);
    border-right:1px solid rgba(255,255,255,0.3);
    padding:20px; position:fixed; left:0; top:0; display:flex; flex-direction:column; z-index:100;
  }
  .sidebar h2 { font-size:1.4rem; color:#111; margin-bottom:25px; text-align:center; }
  .sidebar button {
    width:100%; background:rgba(0,0,0,0.7); color:white; border:none; border-radius:10px; padding:10px 0; margin-bottom:15px;
    cursor:pointer; font-size:1rem; transition:0.3s;
  }
  .sidebar button:hover { background:#111; }

  /* Main content */
  .content { margin-left:270px; padding:40px 20px; flex:1; text-align:center; }

  header { font-size:1.8rem; font-weight:600; color:#111; margin-bottom:10px; }

  .subtitle { color:#555; margin-bottom:40px; }

  .product-grid {
    display:grid; grid-template-columns:repeat(auto-fit,minmax(250px,1fr)); gap:25px; justify-items:center;
  }

  .product-card {
    background:rgba(255,255,255,0.25); backdrop-filter:blur(15px); border-radius:20px; overflow:hidden; box-shadow:0 6px 20px rgba(0,0,0,0.08); transition:0.4s; cursor:pointer; width:100%; max-width:320px; position:relative;
  }
  .product-card:hover { transform:translateY(-5px); }
  .product-card img { width:100%; height:200px; object-fit:cover; border-bottom:1px solid rgba(0,0,0,0.1); }
  .product-card h3 { font-size:1.1rem; color:#111; margin:10px 0; }
  .price { color:#333; font-weight:500; margin-bottom:10px; }
  .actions { display:flex; justify-content:center; gap:10px; padding-bottom:15px; }
  .btn { background:#111; color:white; border:none; border-radius:8px; padding:8px 12px; cursor:pointer; font-size:0.9rem; transition:0.3s; }
  .btn:hover { background:#000; }

  /* 3-dot menu */
  #menuBtn { position:fixed; top:20px; right:20px; font-size:26px; cursor:pointer; background:rgba(255,255,255,0.3); padding:8px; border-radius:10px; box-shadow:0 3px 8px rgba(0,0,0,0.1); transition:0.3s; z-index:101; }
  #menuBtn:hover { background:rgba(255,255,255,0.5); }
  .sidebar.hidden { left:-270px; transition:left 0.4s; }
  .sidebar.active { left:0; }
</style>
</head>
<body>

<!-- Sidebar -->
<aside class="sidebar hidden" id="sidebar">
  <h2>Menu</h2>
  <button onclick="window.location.href='index.html'">üè† Home</button>
  <button id="cartBtn">üõí View Cart</button>
  <button id="logoutBtn">üö™ Logout</button>
</aside>

<!-- 3-dot menu button -->
<div id="menuBtn">‚ãÆ</div>

<!-- Content -->
<div class="content">
  <header>Our Featured Designs</header>
  <p class="subtitle">Explore professionally crafted designs tailored to elevate your brand and visual identity.</p>

  <div class="product-grid" id="productGrid"></div>
</div>

<script>
const menuBtn = document.getElementById("menuBtn");
const sidebar = document.getElementById("sidebar");
menuBtn.addEventListener("click", ()=> sidebar.classList.toggle("active"));

// Load products from products.json
fetch('products.json')
.then(res => res.json())
.then(products => {
  const productGrid = document.getElementById("productGrid");
  productGrid.innerHTML = products.map((p,i)=>`
    <div class="product-card">
      <img src="${p.image}" alt="${p.name}">
      <h3>${p.name}</h3>
      <div class="price">‚Ç¶${p.price.toLocaleString()}</div>
      <div class="actions">
        <button class="btn" onclick="previewProduct(${i})">Preview</button>
      </div>
    </div>
  `).join("");

  window.products = products; // store globally for preview
});

// Preview product
function previewProduct(i){
  const p = window.products[i];
  Swal.fire({
    title: p.name,
    text: p.description || "",
    imageUrl: p.image,
    imageWidth: 400,
    confirmButtonText: "Add to Cart",
    showCancelButton:true,
    cancelButtonText:"Cancel",
    confirmButtonColor:"#111"
  }).then(res=>{
    if(res.isConfirmed){
      const cart = JSON.parse(localStorage.getItem("ogshop_cart")) || [];
      cart.push(p);
      localStorage.setItem("ogshop_cart",JSON.stringify(cart));
      Swal.fire("Added!", `${p.name} has been added to your cart.`, "success");
    }
  });
}

// Cart
document.getElementById("cartBtn").addEventListener("click", ()=>{
  const cart = JSON.parse(localStorage.getItem("ogshop_cart")) || [];
  if(cart.length===0){Swal.fire("Your Cart","Your cart is empty!","info"); return;}
  const cartHTML = cart.map((x,i)=>`
    <div style="display:flex;justify-content:space-between;align-items:center;padding:6px 0;">
      <span>${x.name} - ‚Ç¶${x.price.toLocaleString()}</span>
      <button style="background:#ef4444;color:#fff;border:none;border-radius:5px;padding:3px 6px;cursor:pointer;" onclick="removeCartItem(${i})">X</button>
    </div>
  `).join("");
  Swal.fire({title:"Your Cart", html:`<div style="text-align:left;max-height:200px;overflow:auto">${cartHTML}</div>`, showCancelButton:true, confirmButtonText:"Checkout", cancelButtonText:"Close"})
  .then(r=>{if(r.isConfirmed) window.location.href="checkout.html";});
});
function removeCartItem(i){
  const cart = JSON.parse(localStorage.getItem("ogshop_cart")) || [];
  cart.splice(i,1);
  localStorage.setItem("ogshop_cart",JSON.stringify(cart));
  Swal.close();
  document.getElementById("cartBtn").click();
}

// Logout
document.getElementById("logoutBtn").addEventListener("click", ()=>{
  Swal.fire({title:"Confirm Logout", text:"Do you really want to logout?", icon:"warning", showCancelButton:true, confirmButtonText:"Yes, Logout", confirmButtonColor:"#d33"})
  .then(res=>{if(res.isConfirmed){localStorage.removeItem("loggedInUser"); Swal.fire("Logged Out","You have successfully logged out.","success"); setTimeout(()=>window.location.href="login.html",1200);}});
});
</script>
</body>
</html>
