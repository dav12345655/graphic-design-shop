<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Online Graphic Shop</title>
<style>
  body {
    font-family: "Segoe UI", sans-serif;
    margin: 0; padding: 0;
    background: #f0f4f8; color: #333;
  }
  header {
    background: linear-gradient(90deg,#111,#333);
    color: white; padding: 15px;
    display: flex; justify-content: space-between; align-items: center;
    box-shadow: 0 2px 8px rgba(0,0,0,0.2);
  }
  header h1 { font-size: 22px; margin: 0; }
  .wallet-btn, .cart-btn {
    background: #ff9800;
    color: white; border: none; padding: 10px 15px;
    border-radius: 6px; font-weight: bold; cursor: pointer; margin-left: 10px;
    transition: 0.2s;
  }
  .wallet-btn:hover, .cart-btn:hover { background: #e68900; }
  .container { width: 90%; max-width: 1100px; margin: 20px auto; }
  #search-input { width: 100%; padding: 10px; margin-bottom: 15px; border-radius: 5px; border:1px solid #ccc;}
  .grid { display: grid; grid-template-columns: repeat(auto-fill,minmax(230px,1fr)); gap:15px;}
  .product { background:white; border-radius:10px; box-shadow:0 2px 6px rgba(0,0,0,0.1); overflow:hidden; transition:0.2s;}
  .product:hover { transform: scale(1.03);}
  .product img { width:100%; height:180px; object-fit:cover;}
  .info { padding:10px; text-align:center;}
  .info h3 { margin:5px 0; font-size:16px; color:#333; }
  .info button { padding:10px 15px; border:none; border-radius:6px; cursor:pointer; font-weight:bold; transition:0.2s;}
  .preview-btn { background:#007bff; color:white; width:100%; }
  .preview-btn:hover { background:#0061cc; }

  /* Cart Modal */
  .cart-modal { display:none; position:fixed; z-index:9999; left:0; top:0; width:100%; height:100%; background-color: rgba(0,0,0,0.5);}
  .cart-content { background:white; margin:80px auto; padding:20px; border-radius:10px; width:90%; max-width:400px; box-shadow:0 0 15px rgba(0,0,0,0.2);}
  .cart-item { display:flex; justify-content:space-between; align-items:center; margin:10px 0; font-size:14px;}
  .cart-item button { background:red; color:white; border:none; padding:5px 8px; border-radius:5px; cursor:pointer; }
  .close-cart { float:right; font-size:25px; cursor:pointer; }
  .checkout-btn { display:block; background:#28a745; color:#fff; padding:10px; text-align:center; border-radius:5px; margin-top:15px; text-decoration:none; }

  /* Product Preview Modal */
  #productPreviewModal { display:none; position:fixed; z-index:2000; left:0; top:0; width:100%; height:100%; background-color: rgba(0,0,0,0.6); align-items:center; justify-content:center;}
  #productPreviewModal .preview-box { background:white; padding:20px; border-radius:10px; max-width:400px; text-align:center; box-shadow:0 5px 15px rgba(0,0,0,0.3);}
  #productPreviewModal img { max-width:100%; border-radius:8px; margin-bottom:10px;}
  .preview-buttons button { padding:10px 15px; border:none; border-radius:6px; margin:5px; cursor:pointer; font-weight:bold;}
  .add-to-cart-preview { background:#28a745; color:white;}
  .cancel-preview { background:#ccc; color:black;}

  /* Floating WhatsApp */
  .whatsapp-float { position:fixed; bottom:20px; right:20px; background-color:#25D366; color:white; border-radius:50%; width:60px; height:60px; display:flex; align-items:center; justify-content:center; box-shadow:0 4px 8px rgba(0,0,0,0.3); font-size:28px; text-decoration:none; z-index:1000;}

</style>
</head>
<body>
<header>
  <h1>Online Graphic Shop</h1>
  <div>
    <span id="wallet-display">Wallet: â‚¦0.00</span>
    <button class="wallet-btn" id="depositBtn">Deposit</button>
    <button id="cart-btn" class="cart-btn">ðŸ›’ Cart</button>
  </div>
</header>

<div class="container">
  <input type="text" id="search-input" placeholder="Search for designs..." />
  <div id="products-grid" class="grid"></div>
</div>

<!-- Cart Modal -->
<div id="cart-modal" class="cart-modal">
  <div class="cart-content">
    <span id="close-cart" class="close-cart">&times;</span>
    <h2>Your Cart</h2>
    <div id="cart-items"></div>
    <p><strong>Total:</strong> â‚¦<span id="total-amount">0</span></p>
    <a href="checkout.html" class="checkout-btn">Proceed to Checkout</a>
  </div>
</div>

<!-- Product Preview Modal -->
<div id="productPreviewModal">
  <div class="preview-box">
    <img id="previewImage" src="" alt="Product">
    <h3 id="previewName"></h3>
    <p id="previewPrice" style="font-weight:bold;"></p>
    <div class="preview-buttons">
      <button id="confirmAddBtn" class="add-to-cart-preview">Add to Cart</button>
      <button id="cancelPreviewBtn" class="cancel-preview">Cancel</button>
    </div>
  </div>
</div>

<!-- Floating WhatsApp -->
<a href="https://wa.me/2349121383292" target="_blank" class="whatsapp-float">ðŸ’¬</a>

<script>
document.addEventListener("DOMContentLoaded", () => {
  const grid = document.getElementById("products-grid");
  const cartBtn = document.getElementById("cart-btn");
  const cartModal = document.getElementById("cart-modal");
  const closeCart = document.getElementById("close-cart");
  const cartContainer = document.getElementById("cart-items");
  const totalAmount = document.getElementById("total-amount");
  const searchInput = document.getElementById("search-input");
  const walletDisplay = document.getElementById("wallet-display");
  const depositBtn = document.getElementById("depositBtn");

  let products = [];
  let cart = JSON.parse(localStorage.getItem("cart")) || [];
  let wallet = parseFloat(localStorage.getItem("wallet") || "0");

  // Update wallet display
  function updateWalletDisplay(){
    walletDisplay.textContent = 'Wallet: â‚¦'+wallet.toLocaleString();
    localStorage.setItem("wallet", wallet);
  }
  updateWalletDisplay();

  // Deposit money
  depositBtn.addEventListener("click", ()=>{
    const amount = parseFloat(prompt("Enter amount to deposit:"));
    if(!amount || amount<=0){ alert("Invalid amount."); return; }
    wallet += amount;
    updateWalletDisplay();
    alert("ðŸ’° Deposit successful! Your wallet balance is â‚¦"+wallet.toLocaleString());
  });

  // Fetch products
  fetch("products.json")
    .then(res=>res.json())
    .then(data=>{
      products = data.map((p,i)=>({...p,id:i}));
      renderProducts(products);
    }).catch(err=>console.error("Error loading products:",err));

  function renderProducts(list){
    grid.innerHTML = "";
    if(list.length===0){ grid.innerHTML="<p>No products found.</p>"; return; }
    list.forEach((p,i)=>{
      const div = document.createElement("div");
      div.className="product";
      div.innerHTML=`
        <img src="${p.image}" alt="${p.name}">
        <div class="info">
          <h3>${p.name}</h3>
          <p>â‚¦${p.price}</p>
          <button class="preview-btn" data-id="${i}">Preview</button>
        </div>`;
      grid.appendChild(div);
    });
  }

  // Cart functions
  function renderCart(){
    cartContainer.innerHTML="";
    let total=0;
    if(cart.length===0){
      cartContainer.innerHTML="<p>Your cart is empty.</p>";
    } else {
      cart.forEach((item,index)=>{
        const div = document.createElement("div");
        div.className="cart-item";
        div.innerHTML=`${item.name} - â‚¦${parseFloat(item.price).toLocaleString()} 
        <button data-index="${index}">Delete</button>`;
        cartContainer.appendChild(div);
        total += parseFloat(item.price);
      });
    }
    totalAmount.textContent = total.toLocaleString();
    localStorage.setItem("cart", JSON.stringify(cart));
  }

  grid.addEventListener("click", (e)=>{
    if(e.target.classList.contains("preview-btn")){
      const id =
