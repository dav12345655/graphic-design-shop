<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Admin – Online Graphic Shop</title>
  <style>
    body {font-family: Arial, sans-serif; background: #f5f7fb; margin: 0;}
    header {background: #222; color: #fff; padding: 1rem;}
    main {max-width: 1000px; margin: 1rem auto; background: #fff; padding: 1rem; border-radius: 8px;}
    input, select {padding: 6px; margin: 4px;}
    button {padding: 6px 10px; margin: 4px; border: none; border-radius: 5px; cursor: pointer;}
    .primary {background: #007bff; color: #fff;}
    .danger {background: #d9534f; color: #fff;}
    .success {background: #28a745; color: #fff;}
    table {width: 100%; border-collapse: collapse; margin-top: 10px;}
    th, td {padding: 8px; border-bottom: 1px solid #ddd;}
    img {width: 70px; height: 50px; object-fit: cover; border-radius: 6px;}
  </style>
</head>
<body>
  <header>
    <h2>Admin Dashboard – Online Graphic Shop</h2>
  </header>

  <main>
    <div id="login-section">
      <h3>Enter Admin Password</h3>
      <input type="password" id="adminPass" placeholder="Password">
      <button class="primary" id="loginBtn">Login</button>
      <p style="color:gray;">Default password: <b>admin123</b></p>
    </div>

    <div id="admin-section" style="display:none;">
      <button class="primary" id="generateBtn">Generate 500 Designs</button>
      <button class="success" id="saveLocal">Save to LocalStorage</button>
      <button class="danger" id="clearLocal">Clear LocalStorage</button>
      <button class="primary" id="exportJSON">Export JSON</button>

      <table id="productTable">
        <thead>
          <tr>
            <th>Preview</th>
            <th>Title</th>
            <th>Category</th>
            <th>Price</th>
            <th>Action</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>

      <h3>Edit Product</h3>
      <input id="titleInput" placeholder="Title">
      <input id="priceInput" placeholder="Price (₦)">
      <input id="imgInput" placeholder="Image URL">
      <input id="categoryInput" placeholder="Category">
      <button class="success" id="updateBtn">Update</button>
    </div>
  </main>
<script>
const ADMIN_PASSWORD = "admin123";
const STORAGE_KEY = "ogshop_products_v1";
let products = JSON.parse(localStorage.getItem(STORAGE_KEY)) || [];

const loginSection = document.getElementById("login");
const adminPanel = document.getElementById("admin-panel");

document.getElementById("loginBtn").onclick = () => {
  const password = document.getElementById("adminPassword").value;
  if (password === ADMIN_PASSWORD) {
    loginSection.style.display = "none";
    adminPanel.style.display = "block";
    renderProducts();
  } else {
    alert("Incorrect password");
  }
};

function saveProducts() {
  localStorage.setItem(STORAGE_KEY, JSON.stringify(products));
}

function renderProducts() {
  const list = document.getElementById("productList");
  list.innerHTML = "";
  products.forEach((p, i) => {
    const div = document.createElement("div");
    div.style.border = "1px solid #ccc";
    div.style.margin = "5px";
    div.style.padding = "10px";
    div.style.borderRadius = "10px";
    div.innerHTML = `
      <strong>${p.name}</strong> - ₦${p.price}<br>
      <img src="${p.image}" width="100" style="border-radius:6px"><br>
      <button onclick="editProduct(${i})">Edit</button>
      <button onclick="deleteProduct(${i})">Delete</button>
    `;
    list.appendChild(div);
  });
}

function editProduct(index) {
  const p = products[index];
  const newName = prompt("Enter new name:", p.name);
  const newPrice = prompt("Enter new price:", p.price);
  const newImage = prompt("Enter new image URL:", p.image);
  if (newName && newPrice && newImage) {
    products[index] = { ...p, name: newName, price: Number(newPrice), image: newImage };
    saveProducts();
    renderProducts();
    alert("Product updated!");
  }
}

function deleteProduct(index) {
  if (confirm("Delete this product?")) {
    products.splice(index, 1);
    saveProducts();
    renderProducts();
  }
}

document.getElementById("addProductBtn").onclick = () => {
  const name = document.getElementById("newName").value;
  const price = Number(document.getElementById("newPrice").value);
  const image = document.getElementById("newImage").value;
  if (!name || !price || !image) return alert("Please fill all fields");
  products.push({ id: Date.now(), name, price, image });
  saveProducts();
  renderProducts();
  document.getElementById("newName").value = "";
  document.getElementById("newPrice").value = "";
  document.getElementById("newImage").value = "";
};

document.getElementById("exportJSON").onclick = () => {
  const blob = new Blob([JSON.stringify(products, null, 2)], { type: "application/json" });
  const a = document.createElement("a");
  a.href = URL.createObjectURL(blob);
  a.download = "products.json";
  a.click();
};
</script>
</body>
</html>
