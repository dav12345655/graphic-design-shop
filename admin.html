<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Admin – Online Graphic Shop</title>
  <style>
    body {font-family: Arial, sans-serif; background: #f5f7fb; margin: 0;}
    header {background: #222; color: #fff; padding: 1rem;}
    main {max-width: 1000px; margin: 1rem auto; background: #fff; padding: 1rem; border-radius: 8px;}
    input, select {padding: 6px; margin: 4px;}
    button {padding: 6px 10px; margin: 4px; border: none; border-radius: 5px; cursor: pointer;}
    .primary {background: #007bff; color: #fff;}
    .danger {background: #d9534f; color: #fff;}
    .success {background: #28a745; color: #fff;}
    table {width: 100%; border-collapse: collapse; margin-top: 10px;}
    th, td {padding: 8px; border-bottom: 1px solid #ddd;}
    img {width: 70px; height: 50px; object-fit: cover; border-radius: 6px;}
  </style>
</head>
<body>
  <header>
    <h2>Admin Dashboard – Online Graphic Shop</h2>
  </header>

  <main>
    <div id="login-section">
      <h3>Enter Admin Password</h3>
      <input type="password" id="adminPass" placeholder="Password">
      <button class="primary" id="loginBtn">Login</button>
      <p style="color:gray;">Default password: <b>admin123</b></p>
    </div>

    <div id="admin-section" style="display:none;">
      <button class="primary" id="generateBtn">Generate 500 Designs</button>
      <button class="success" id="saveLocal">Save to LocalStorage</button>
      <button class="danger" id="clearLocal">Clear LocalStorage</button>
      <button class="primary" id="exportJSON">Export JSON</button>

      <table id="productTable">
        <thead>
          <tr>
            <th>Preview</th>
            <th>Title</th>
            <th>Category</th>
            <th>Price</th>
            <th>Action</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>

      <h3>Edit Product</h3>
      <input id="titleInput" placeholder="Title">
      <input id="priceInput" placeholder="Price (₦)">
      <input id="imgInput" placeholder="Image URL">
      <input id="categoryInput" placeholder="Category">
      <button class="success" id="updateBtn">Update</button>
    </div>
  </main>
   <script>
  const ADMIN_PASSWORD = "admin123";
  const STORAGE_KEY = "ogshop_products_v1";
  let products = [];
  let editingIndex = null;

  const loginBtn = document.getElementById("loginBtn");
  const adminPass = document.getElementById("adminPass");
  const adminSection = document.getElementById("admin-section");
  const loginSection = document.getElementById("login-section");

  loginBtn.onclick = () => {
    if (adminPass.value === ADMIN_PASSWORD) {
      loginSection.style.display = "none";
      adminSection.style.display = "block";
      loadFromLocal();
    } else alert("Wrong password");
  };

  function generateProducts(n = 500) {
    const categories = ["Logos", "Flyers", "Banners", "Posters", "Social Media"];
    const arr = [];
    for (let i = 0; i < n; i++) {
      const cat = categories[i % categories.length];
      arr.push({
        id: "GFX" + (1000 + i),
        title: `${cat} Template #${i + 1}`,
        price: Math.floor(Math.random() * 10000 + 1500),
        category: cat,
        img: `https://source.unsplash.com/300x200/?${cat}-design&sig=${i}`
      });
    }
    products = arr;
    renderTable();
  }

  function renderTable() {
    const tbody = document.querySelector("#productTable tbody");
    tbody.innerHTML = "";
    products.forEach((p, i) => {
      const row = document.createElement("tr");
      row.innerHTML = `
        <td><img src="${p.img}" alt="design"></td>
        <td>${p.title}</td>
        <td>${p.category}</td>
        <td>₦${p.price.toLocaleString()}</td>
        <td>
          <button class="primary edit-btn" data-index="${i}">Edit</button>
          <button class="danger delete-btn" data-index="${i}">Delete</button>
        </td>`;
      tbody.appendChild(row);
    });

    // Bind button events dynamically
    document.querySelectorAll(".edit-btn").forEach(btn =>
      btn.addEventListener("click", e => {
        const index = e.target.dataset.index;
        editProduct(index);
      })
    );
    document.querySelectorAll(".delete-btn").forEach(btn =>
      btn.addEventListener("click", e => {
        const index = e.target.dataset.index;
        deleteProduct(index);
      })
    );
  }

  function editProduct(index) {
    const p = products[index];
    editingIndex = index;
    document.getElementById("titleInput").value = p.title;
    document.getElementById("priceInput").value = p.price;
    document.getElementById("imgInput").value = p.img;
    document.getElementById("categoryInput").value = p.category;
    alert("Product loaded into edit form ✅");
  }

  function deleteProduct(index) {
    products.splice(index, 1);
    renderTable();
  }

  document.getElementById("updateBtn").onclick = () => {
    if (editingIndex === null) return alert("No product selected");
    const p = products[editingIndex];
    p.title = document.getElementById("titleInput").value;
    p.price = parseFloat(document.getElementById("priceInput").value);
    p.img = document.getElementById("imgInput").value;
    p.category = document.getElementById("categoryInput").value;
    renderTable();
    editingIndex = null;
    alert("✅ Product updated!");
  };

  document.getElementById("generateBtn").onclick = () => generateProducts();

  function loadFromLocal() {
    const saved = localStorage.getItem(STORAGE_KEY);
    if (saved) {
      products = JSON.parse(saved);
      renderTable();
    } else alert("No products found. Click Generate to create.");
  }

  document.getElementById("saveLocal").onclick = () => {
    localStorage.setItem(STORAGE_KEY, JSON.stringify(products));
    alert("Saved to localStorage!");
  };

  document.getElementById("clearLocal").onclick = () => {
    localStorage.removeItem(STORAGE_KEY);
    alert("LocalStorage cleared");
    products = [];
    renderTable();
  };

  document.getElementById("exportJSON").onclick = () => {
    const blob = new Blob([JSON.stringify(products, null, 2)], {type:"application/json"});
    const a = document.createElement("a");
    a.href = URL.createObjectURL(blob);
    a.download = "products.json";
    a.click();
  };
</script>
</body>
</html>
