<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Checkout â€” Online Graphic Shop</title>
<style>
  body{font-family:Inter,system-ui,Arial;background:#f4f6fb;color:#0f172a;margin:0}
  header{background:#111;color:#fff;padding:14px 18px;text-align:center}
  main{max-width:900px;margin:24px auto;padding:18px}
  .card{background:#fff;border-radius:12px;padding:14px;box-shadow:0 8px 24px rgba(16,24,40,0.06)}
  .item{display:flex;align-items:center;justify-content:space-between;padding:10px 0;border-bottom:1px dashed #eee}
  .item img{width:80px;height:60px;object-fit:cover;border-radius:6px;margin-right:10px}
  .total{font-weight:900;font-size:20px;margin-top:12px}
  .form{margin-top:12px;display:grid;gap:8px}
  input,textarea{padding:10px;border-radius:8px;border:1px solid #e6e9ef}
  .btn{padding:10px;border-radius:8px;border:0;background:#111;color:#fff;cursor:pointer;font-weight:700}
  .note{background:#fff8f6;border:1px solid #ffdede;padding:10px;border-radius:8px;margin-top:12px}
</style>
</head>
<!-- âœ… Floating WhatsApp Chat Button -->
<a href="https://wa.me/2349121383292" target="_blank" 
   style="
     position: fixed;
     bottom: 20px;
     right: 20px;
     background-color: #25D366;
     color: white;
     border-radius: 50%;
     width: 60px;
     height: 60px;
     display: flex;
     align-items: center;
     justify-content: center;
     box-shadow: 0 4px 8px rgba(0,0,0,0.3);
     font-size: 28px;
     text-decoration: none;
     z-index: 1000;
   ">
   ðŸ’¬
</a>

  <body>
<header><h1>Checkout â€” Online Graphic Shop</h1></header>
<main>
  <div class="card" id="checkout-card">
    <h3>Order Summary</h3>
    <div id="items"></div>
    <div class="total">Total: â‚¦<span id="total">0</span></div>

    <h4 style="margin-top:16px">Delivery / Contact</h4>
    <div class="form">
      <input id="name" placeholder="Full name" />
      <input id="phone" placeholder="Phone or Email" />
      <textarea id="address" rows="3" placeholder="Address (optional)"></textarea>
    </div>

    <div class="note">
      <strong>Payment details</strong><br>
      Name: <strong>Joy Gift</strong><br>
      Account: <strong>9121383292</strong><br>
      Bank: <strong>Opay</strong><br>
      After payment, click "I have paid" and optionally paste your transaction ID in the box that appears.
    </div>

    <div style="display:flex;gap:10px;margin-top:12px">
      <button id="pay" class="btn" style="flex:1">I have paid</button>
      <button id="back" class="btn" style="background:#e6e6e6;color:#111">Back to shop</button>
    </div>

  </div>
</main>

<script>
  // read cart from localStorage (same key used in index.html)
  let cart = JSON.parse(localStorage.getItem('ogshop_cart') || '{}') || {};
  const savedProducts = JSON.parse(localStorage.getItem('ogshop_products_v1') || '[]') || [];

  function buildItems(){
    const itemsDiv = document.getElementById('items');
    itemsDiv.innerHTML = '';
    let total = 0;
    const entries = Object.entries(cart);
    if(entries.length === 0){
      itemsDiv.innerHTML = '<p>Your cart is empty. <a href="index.html">Continue shopping</a></p>';
      document.getElementById('total').textContent = '0';
      return;
    }
    for(const [id, qty] of entries){
      const p = savedProducts.find(x=>x.id === id);
      const price = p ? p.price : 0;
      total += price * qty;
      const row = document.createElement('div');
      row.className = 'item';
      row.innerHTML = `<div style="display:flex;align-items:center"><img src="${p?p.img:''}" alt=""><div><div style="font-weight:700">${p?p.title:id}</div><div style="color:#667085;font-size:13px">${qty} Ã— ${new Intl.NumberFormat('en-NG').format(price)}</div></div></div><div style="font-weight:800">â‚¦${new Intl.NumberFormat('en-NG').format(price*qty)}</div>`;
      itemsDiv.appendChild(row);
    }
    document.getElementById('total').textContent = new Intl.NumberFormat('en-NG').format(total);
  }

  buildItems();

  document.getElementById('back').addEventListener('click', ()=> location.href='index.html');

  document.getElementById('pay').addEventListener('click', ()=>{
    const name = document.getElementById('name').value.trim();
    const phone = document.getElementById('phone').value.trim();
    if(!name || !phone){ alert('Please enter name and phone/email.'); return; }
    const tx = prompt('Enter transaction ID (optional) after payment â€” or press OK to continue without it.');
    // save order locally
    const orders = JSON.parse(localStorage.getItem('ogshop_orders_v1') || '[]');
    const order = { id: 'ORD'+Date.now(), customer:{name,phone}, items:cart, tx:tx||null, createdAt:new Date().toISOString() };
    orders.unshift(order);
    localStorage.setItem('ogshop_orders_v1', JSON.stringify(orders));
    // clear cart
    localStorage.removeItem('ogshop_cart');
    alert('Thank you! Your order has been saved locally. Order ID: ' + order.id + (tx?('\\nTransaction ID: '+tx):''));
    location.href = 'index.html';
  });
</script>
</body>
</html>
